(function(){var t,i;i=function(){function t(){}return t.merge_options=function(t,i){var e,s;s={};for(e in t)s[e]=t[e];for(e in i)s[e]=i[e];return s},t}(),t=function(){function t(t){var i;null==t&&(t={}),this._set_options(t),this._callbacks=[],i=this,this.ready=!1,this.status="processing",this.options.timeout>0&&(this._timeout_process=setTimeout(function(){return i._finish("timeout")},this.options.timeout)),this._time_started=(new Date).getTime(),this._last_checked=this._time_started,this._success_iterations=0,this._preprocess=setTimeout(function(){return i._process=setInterval(function(){var t,e;return e=(new Date).getTime(),t=e-i._last_checked-i.options.frequency,i.options.min_delta<t&&t<i.options.max_delta?(i._success_iterations++,i._success_iterations>=i.options.iterations&&i._finish("success")):i._success_iterations=0,i._last_checked=e},i.options.frequency)},this.options.delay)}return t.defaults={delay:100,frequency:30,iterations:3,duration:null,scatter:5,min_delta:null,max_delta:null,timeout:null},t.prototype._set_options=function(t){return this.options=i.merge_options(this.constructor.defaults,t),null!=this.options.duration&&(this.options.iterations=Math.ceil(this.options.duration/this.options.frequency)),null==this.options.min_delta&&(this.options.min_delta=-this.options.scatter),null==this.options.max_delta?this.options.max_delta=this.options.scatter:void 0},t.prototype.info=function(){var t,i;return null!=this.time_passed?i=this.time_passed:(t=(new Date).getTime(),i=t-this._time_started),{status:this.status,time_passed:i,ready:this.ready,options:this.options}},t.prototype._finish=function(t){var i,e,s,n,r,o;for(null!=this._preprocess&&clearTimeout(this._preprocess),null!=this._process&&clearInterval(this._process),null!=this._timeout_process&&clearTimeout(this._timeout_process),this.ready=!0,this.status=t,n=(new Date).getTime(),this.time_passed=n-this._time_started,r=this._callbacks,o=[],e=0,s=r.length;s>e;e++)i=r[e],o.push(i.fn.call(i.self,this.info()));return o},t.prototype["do"]=function(t,i){return null==i&&(i=null),null==i&&(i=t,t=this),this.ready?i.call(t,this.info()):this._callbacks.push({fn:i,self:t}),this},t}(),window.Afterlag=t,function(i){var e,s,n;return e=null,s=function(i){return null==i&&(i={}),e=new t(i)},n=function(i,n){var r,o;return o=null,null==i?r=null!=e?e:s():null==n?"function"==typeof i?(n=i,r=null!=e?e:s()):"string"==typeof i&&(o=i,n=null,r=null!=e?e:s()):(r=i===!0?s():i instanceof t?i:s(i),"string"==typeof n&&(o=n,n=null)),{afterlag:r,callback:n,trigger:o}},i.afterlag=function(t,e){var s;return s=n(t,e),s.afterlag["do"](function(t){return null!=s.callback&&s.callback.call(s.afterlag,t),i(document).trigger("afterlag",[t]),null!=s.trigger?i(document).trigger(s.trigger,[t]):void 0}),s.afterlag},i.fn.afterlag=function(t,e){var s;return s=n(t,e),this.each(function(){var t,e;return t=i(this),t.data("afterlag",s.afterlag),e=this,s.afterlag["do"](function(i){return null!=s.callback&&s.callback.call(e,i),t.trigger("afterlag",[i]),null!=s.trigger?t.trigger(s.trigger,[i]):void 0})})}}(jQuery)}).call(this);